<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="OrderReceiptLinePriceUnit" owl="1">
        <t t-if="!env.pos.config.display_tax_orderline">
            <div class="product-line-name">
                <t t-esc="env.pos.format_currency_no_symbol(line.get_display_price())"/>
            </div>
        </t>
        <t t-if="env.pos.config.display_tax_orderline">
            <div class="product-line-name">
                <t t-esc="env.pos.format_currency_no_symbol(line.get_price_with_tax())"/>
            </div>
        </t>
    </t>

    <t t-name="OrderReceiptLineExtra" owl="1">
        <tr/>
        <t t-if="props.line.discount">
            <div class="product-line-name">
                Disc: <t t-esc="props.line.discount"/>
                %
            </div>
        </t>
        <t t-if="props.line.price_extra">
            <div class="product-line-name">
                Price Extra: <t t-esc="env.pos.format_currency_no_symbol(props.line.price_extra, 'Price extra')"/>
            </div>
        </t>
        <t t-if="props.line.discount_extra">
            <div class="product-line-name">
                Discount Extra: <t t-esc="props.line.discount_extra"/>
                %
            </div>
        </t>
        <t t-if="env.pos.config.display_tax_receipt and props.line.get_tax() > 0">
            <div class="product-line-name">
                Taxes:
                <t t-esc="env.pos.format_currency_no_symbol(props.line.get_tax())"/>
            </div>
        </t>
        <t t-if="props.line.pack_lot_lines and props.line.pack_lot_lines.models">
            <t t-foreach="props.line.pack_lot_lines.models" t-as="lot_model">
                <div class="receipt-line ">
                    Lot: <t t-esc="lot_model.attributes.lot_name"/>
                </div>
            </t>
        </t>
        <t t-if="props.line.combo_items">
            <t t-foreach="props.line.combo_items" t-as="combo_item">
                <div class="product-line-name">
                    +
                    <t t-esc="combo_item.quantity * props.line.quantity"/>
                    <t t-esc="combo_item.product_id[1]"/>
                </div>
            </t>
        </t>
        <t t-if="props.line.selected_combo_items">
            <t t-foreach="props.line.selected_combo_items" t-as="product_id">
                <t t-if="env.pos.db.product_by_id[product_id]">
                    <div class="product-line-name">
                        +
                        <t t-esc="props.line.selected_combo_items[product_id]"/>
                        <t t-esc="env.pos.db.product_by_id[product_id].display_name"/>
                    </div>
                </t>
            </t>
        </t>
        <t t-if="props.line.addon_ids">
            <t t-foreach="props.line.addon_ids" t-as="product_id">
                <t t-if="env.pos.db.product_by_id[product_id]">
                    <div class="product-line-name">
                        +
                        <t t-esc="props.line.quantity"/>
                        <t t-esc="env.pos.db.product_by_id[product_id].display_name"/>
                    </div>
                </t>
            </t>
        </t>
        <t t-if="props.line.get_line_note()">
            <div class="product-line-name">
                Notes :
                <t t-esc="props.line.get_line_note()"/>
            </div>
        </t>
        <div class="product-line-name" t-if="props.line.packaging">
            Packaging :
            <t t-esc="props.line.packaging.name"/>
        </div>
        <t t-if="props.line.variants">
            <t t-foreach="props.line.variants" t-as="variant">
                <div class="product-line-name">
                    + <t t-esc="variant.value_id[1]"/>
                    <t t-esc="env.pos.format_currency_no_symbol(variant.price_extra, 'Price extra')"/>
                </div>
            </t>
        </t>
        <t t-if="props.line.tags and props.line.tags.length">
            Tags:
            <t t-foreach="props.line.tags" t-as="tag">
                <div class="product-line-name">
                    <t t-esc="tag.name"/>
                </div>
            </t>
        </t>
        <t t-if="props.line.generic_options and props.line.generic_options.length">
            Generic Option:
            <t t-foreach="props.line.generic_options" t-as="generic">
                <div class="product-line-name">
                    <t t-esc="generic.name"/>
                </div>
            </t>
        </t>
    </t>

    <t t-name="RetailOrderReceipt" owl="1">
        <div class="pos-receipt">
            <t t-if="receipt.header_html or receipt.header">
                <div t-if='receipt.header_html' class="pos-receipt-center-align">
                    <div class="receipt-line">
                        <span class="pos-receipt-center-align">
                            <t t-raw="receipt.header_html"/>
                        </span>
                    </div>
                </div>
                <div t-if='!receipt.header_html and receipt.header' class="pos-receipt-center-align">
                    <div class="receipt-line">
                        <span class="pos-receipt-center-align">
                            <t t-esc="receipt.header"/>
                        </span>
                    </div>
                </div>
            </t>
            <div t-if="env.pos.config.html_receipt_design and env.pos.config.html_header">
                <t t-raw="env.pos.config.html_header"/>
            </div>
            <table class='receipt-orderlines'>
                <colgroup>
                    <col width='30%'/>
                    <col width='70%'/>
                </colgroup>
                <tr>
                    <th></th>
                    <th></th>
                </tr>
                <tr>
                    <td>
                        <div class="receipt-logo-header" t-if="receipt.company.logo and env.pos.config.display_logo">
                            <img class="pos-receipt-logo"
                                 t-att-src="'/web/image?model=pos.config&amp;field=logo&amp;id=' + env.session.config.id"
                                 alt="Logo"/>
                        </div>
                    </td>
                    <td>
                        <div class="receipt-line" style="text-align: center; font-weight: 900">
                            <t t-esc="receipt.company.name"/>
                        </div>
                        <div class="receipt-line" t-if="receipt.company.vat" style="text-align: center">
                            TIN: <t t-esc="receipt.company.vat"/>
                        </div>
                        <div class="receipt-line" t-if="receipt.contact_address" style="text-align: center">
                            <t t-esc="receipt.contact_address"/>
                        </div>
                        <div class="receipt-line" t-if="receipt.company.phone" style="text-align: center">
                            <t t-esc="receipt.company.phone"/>
                        </div>
                        <div class="receipt-line" t-if="receipt.company.website" style="text-align: center">
                            <t t-esc="receipt.company.website"/>
                        </div>
                        <div class="receipt-line" t-if="receipt.company.email" style="text-align: center">
                            <t t-esc="receipt.company.email"/>
                        </div>
                    </td>
                </tr>
            </table>
            <h3 t-if="env.pos.config.receipt_title and !props.isBill" style="text-align: center">
                <t t-raw="env.pos.config.receipt_title"/>
            </h3>
            <t t-if="props.isBill">
                <h3 style="text-align: center">
                    *** BILL ***
                </h3>
            </t>
            <div class="pos-receipt-contact">
                <div class="receipt-line" t-if="receipt.booking_uid">
                    <h5>Booking Ref : <t t-esc='receipt.booking_uid'/></h5>
                </div>
                <div class="receipt-line">
                    <div t-if="receipt.sequence_number and env.pos.config.display_sequence_number">Sequence No: <t
                            t-esc="receipt.sequence_number"/></div>
                    <div>Counter Name: <t t-esc="env.pos.config.name"/></div>
                </div>
                <div class="receipt-line" t-if="receipt.cashier">
                    <div>Cashier: <t t-esc="receipt.cashier"/></div>
                </div>
                <div class="receipt-line" t-if="receipt.coupon_code">
                    <div>Coupon Code Refund: <t t-esc="receipt.coupon_code"/></div>
                </div>
                <div class="receipt-line" t-if="receipt.guest">
                    <div>Guest: <t t-esc="receipt.guest"/></div>
                    <div>Guest Number: <t t-esc="receipt.guest_number"/></div>
                </div>
                <div class="receipt-line" t-if='receipt.company.company_registry'>
                    <div>Register No: <t t-esc="receipt.company.company_registry"/> </div>
                </div>
                <t t-if="receipt.client">
                    <div class="receipt-line">
                        <div>Customer: <t t-esc="receipt.client.name"/></div>
                    </div>
                    <t t-if="env.pos.config.display_full_customer_information">
                        <div class="receipt-line" t-if="receipt.client.vat">
                            <div>TIN: <t t-esc="receipt.client.vat"/></div>
                        </div>
                        <div class="receipt-line" t-if="receipt.client.email">
                            <div>Email: <t t-esc="receipt.client.email"/></div>
                        </div>
                        <div class="receipt-line" t-if="receipt.client.phone or receipt.client.mobile">
                            <div t-if="receipt.client.phone">Phone: <t t-esc="receipt.client.phone"/></div>
                            <div t-if="receipt.client.mobile">Mobile: <t t-esc="receipt.client.mobile"/></div>
                        </div>
                    </t>
                </t>
                <t t-if="receipt.internal_ref">
                    <div class="receipt-line">
                        <div class="receipt-line">
                            <h5>Internal Transfer: <t t-esc='receipt.internal_ref'/></h5>
                        </div>
                    </div>
                </t>
                <t t-if="receipt.purchase_ref">
                    <div class="receipt-line">
                        <div class="receipt-line">
                            <h5>Purchase Order : <t t-esc='receipt.purchase_ref'/></h5>
                        </div>
                    </div>
                </t>
                <t t-if="receipt.invoice_ref">
                    <div class="receipt-line">
                        Invoice Ref
                        <span class="pos-receipt-right-align">
                            <t t-esc="receipt.invoice_ref"/>
                        </span>
                    </div>
                </t>
                <t t-if="receipt.picking_ref">
                    <div class="receipt-line">
                        Delivery Ref
                        <span class="pos-receipt-right-align">
                            <t t-esc="receipt.picking_ref"/>
                        </span>
                    </div>
                </t>
                <t t-if="env.pos.config.shipping_order and receipt.shipping_client">
                    <div class="receipt-line">
                        <span class="receipt-line">
                            ---------- SHIPPING INFORMATION ----------
                        </span>
                        <div class="receipt-line">
                            Customer:
                            <span class="pos-receipt-right-align">
                                <t t-esc="receipt.shipping_client.name"/>
                            </span>
                        </div>
                        <div class="receipt-line">
                            Address:
                            <span class="pos-receipt-right-align">
                                <t t-if="receipt.shipping_client.street">
                                    <t t-esc="receipt.shipping_client.street"/>
                                </t>
                                <t t-if="receipt.shipping_client.street2">
                                    <t t-esc="receipt.shipping_client.street2"/>
                                </t>
                            </span>
                        </div>
                        <div class="receipt-line">
                            Phone:
                            <span class="pos-receipt-right-align">
                                <t t-if="receipt.shipping_client.phone">
                                    <t t-esc="receipt.shipping_client.phone"/>
                                </t>
                                <t t-if="receipt.shipping_client.street2">
                                    / <t t-esc="receipt.shipping_client.mobile"/>
                                </t>
                            </span>
                        </div>
                        <div class="receipt-line">
                            Comment:
                            <span class="pos-receipt-right-align">
                                <t t-if="receipt.shipping_client.comment">
                                    <t t-esc="receipt.shipping_client.comment"/>
                                </t>
                            </span>
                        </div>
                        <div class="receipt-line">
                            Notes:
                            <span class="pos-receipt-right-align">
                                <t t-if="receipt.order.get_note()">
                                    <t t-esc="receipt.order.get_note()"/>
                                </t>
                            </span>
                        </div>
                    </div>
                </t>
                <t t-if='receipt.delivery_address'>
                    <div class="receipt-line">
                        <span>Shipping to</span>
                        <span class="pos-receipt-right-align">
                            <t t-esc="receipt.delivery_address"/>
                        </span>
                    </div>
                </t>
                <t t-if='receipt.delivery_date'>
                    <div class="receipt-line">
                        <span>Shipping Date</span>
                        <span class="pos-receipt-right-align">
                            <t t-esc="receipt.delivery_date"/>
                        </span>
                    </div>
                </t>
                <t t-if='receipt.delivery_phone'>
                    <div class="receipt-line">
                        <span>Shipping Phone</span>
                        <span class="pos-receipt-right-align">
                            <t t-esc="receipt.delivery_phone"/>
                        </span>
                    </div>
                </t>
                <t t-if="receipt.origin">
                    <div class="receipt-line">
                        <span>Origin</span>
                        <span class="pos-receipt-right-align">
                            <t t-esc="receipt.origin"/>
                        </span>
                    </div>
                </t>
                <t t-if="receipt.date_order">
                    <div class="receipt-line">
                        <span>Date Order</span>
                        <span class="pos-receipt-right-align">
                            <t t-esc="receipt.date_order"/>
                        </span>
                    </div>
                </t>
                <t t-if="receipt.delivery_man">
                    <div class="receipt-line">
                        <span>Delivery Man</span>
                        <span class="pos-receipt-right-align">
                            <t t-esc="receipt.delivery_man.name"/>
                        </span>
                    </div>
                </t>
                <div class="receipt-line" t-if="orderFieldsExtend" style="border-bottom: 1px solid gray">
                    <span>
                        (*) Order Information
                    </span>
                    <span class="pos-receipt-right-align">
                    </span>
                </div>
                <t t-if="orderFieldsExtend">
                    <t t-foreach="orderFieldsExtend" t-as="field_description">
                        <t t-set="value" t-value="orderFieldsExtend[field_description]"/>
                        <t t-if="value.length == 2">
                            <div class="receipt-line">
                                <t t-esc="field_description"/>
                                <span class="pos-receipt-right-align">
                                    <t t-esc="orderFieldsExtend[field_description][1]"/>
                                </span>
                            </div>
                        </t>
                        <t t-else="">
                            <div class="receipt-line">
                                <t t-esc="field_description"/>
                                <span class="pos-receipt-right-align">
                                    <t t-esc="orderFieldsExtend[field_description]"/>
                                </span>
                            </div>
                        </t>
                    </t>
                </t>
                <div class="receipt-line" t-if="deliveryFieldsExtend" style="border-bottom: 1px solid gray">
                    <span>
                        (*) Picking Details
                    </span>
                    <span class="pos-receipt-right-align">
                    </span>
                </div>
                <t t-if="deliveryFieldsExtend">
                    <t t-foreach="deliveryFieldsExtend" t-as="field_description">
                        <t t-set="value" t-value="deliveryFieldsExtend[field_description]"/>
                        <t t-if="value.length == 2">
                            <div class="receipt-line">
                                <t t-esc="field_description"/>
                                <span class="pos-receipt-right-align">
                                    <t t-esc="deliveryFieldsExtend[field_description][1]"/>
                                </span>
                            </div>
                        </t>
                        <t t-else="">
                            <div class="receipt-line">
                                <t t-esc="field_description"/>
                                <span class="pos-receipt-right-align">
                                    <t t-esc="deliveryFieldsExtend[field_description]"/>
                                </span>
                            </div>
                        </t>
                    </t>
                </t>
                <div class="receipt-line" t-if="invoiceFieldsExtend" style="border-bottom: 1px solid gray">
                    <span>
                        (*) Invoice Details
                    </span>
                    <span class="pos-receipt-right-align">
                    </span>
                </div>
                <t t-if="invoiceFieldsExtend">
                    <t t-foreach="invoiceFieldsExtend" t-as="field_description">
                        <t t-set="value" t-value="invoiceFieldsExtend[field_description]"/>
                        <t t-if="value.length == 2">
                            <div class="receipt-line">
                                <t t-esc="field_description"/>
                                <span class="pos-receipt-right-align">
                                    <t t-esc="invoiceFieldsExtend[field_description][1]"/>
                                </span>
                            </div>
                        </t>
                        <t t-else="">
                            <div class="receipt-line">
                                <t t-esc="field_description"/>
                                <span class="pos-receipt-right-align">
                                    <t t-esc="invoiceFieldsExtend[field_description]"/>
                                </span>
                            </div>
                        </t>
                    </t>
                </t>
            </div>

            <br/>
            <div class="orderlines">
                <table class='receipt-orderlines'>
                    <colgroup>
                        <col width='70%'/>
                        <col width='30%'/>
                    </colgroup>
                    <tr style="border-top: 1px solid gray; border-bottom: 1px solid gray" class="receipt-line">
                        <th style='text-align:left'>Item</th>
                        <th style='text-align:right'>
                            <t t-if="env.pos.config.display_tax_orderline">
                                Total(Inc VAT)
                            </t>
                            <t t-else="">
                                S.Total(W/o VAT)
                            </t>
                        </th>
                    </tr>
                    <t t-if="env.pos.config.category_wise_receipt">
                        <t t-set='index' t-value="1"/>
                        <t t-foreach="receipt.orderlines_by_category_name" t-as="category">
                            <div class="receipt-line" style="border-bottom: 1px solid gray; margin-bottom: 15px">
                                <t t-esc="index"/>.
                                <t t-esc='category'/>
                                (
                                <t t-esc="receipt.orderlines_by_category_name[category].length"/>
                                )
                            </div>
                            <t t-set='index' t-value="index + 1"/>
                            <tr t-foreach='receipt.orderlines_by_category_name[category]' t-as='line' t-key="line.uid">
                                <t t-set="product" t-value="line.get_product()"/>
                                <t t-set='simple'
                                   t-value='(line.discount === 0 and line.unit_name === "Units" and line.quantity === 1 and !discount_to_show and !(line.display_discount_policy == "without_discount" &amp;&amp; line.price != line.price_lst))'/>
                                <td style='text-align:left' class="receipt-line">
                                    <t t-if="env.pos.config.display_image_receipt">
                                        <div class="receipt-line">
                                            <div class="pos-receipt-left-padding">
                                                <img class='receipt_line_image' t-att-src="line.get_line_image()"/>
                                            </div>
                                        </div>
                                    </t>
                                    <ProductName product="product"/>
                                    <div class="receipt-line">
                                        <t t-esc="env.pos.format_currency(line.price)"/>
                                        x
                                        <t t-esc="Math.round(line.quantity * Math.pow(10, env.pos.dp['Product Unit of Measure'])) / Math.pow(10, env.pos.dp['Product Unit of Measure'])"/>
                                        <t t-if="env.pos.config.receipt_display_unit" t-esc="line.unit_name"/>
                                    </div>
                                    <div class="receipt-line">
                                        <t t-if="line.discount">
                                            <div class="product-line-name">
                                                Disc: <t t-esc="line.discount"/>
                                                %
                                            </div>
                                        </t>
                                        <t t-if="line.price_extra">
                                            <div class="product-line-name">
                                                Price Extra: <t
                                                    t-esc="env.pos.format_currency_no_symbol(line.price_extra, 'Price extra')"/>
                                            </div>
                                        </t>
                                        <t t-if="line.discount_extra">
                                            <div class="product-line-name">
                                                Discount Extra: <t t-esc="line.discount_extra"/>
                                                %
                                            </div>
                                        </t>
                                        <t t-if="env.pos.config.display_tax_receipt and line.get_tax() > 0">
                                            <div class="product-line-name">
                                                Taxes:
                                                <t t-esc="env.pos.format_currency_no_symbol(line.get_tax())"/>
                                            </div>
                                        </t>
                                        <t t-if="line.pack_lot_lines and line.pack_lot_lines.models">
                                            <t t-foreach="line.pack_lot_lines.models" t-as="lot_model"
                                               t-key="lot_model">
                                                <div class="receipt-line ">
                                                    Lot: <t t-esc="lot_model.attributes.lot_name"/>
                                                </div>
                                            </t>
                                        </t>
                                        <t t-if="line.combo_items">
                                            <t t-foreach="line.combo_items" t-as="combo_item" t-key="combo_item">
                                                <div class="product-line-name">
                                                    +
                                                    <t t-esc="combo_item.quantity * line.quantity"/>
                                                    <t t-esc="combo_item.product_id[1]"/>
                                                </div>
                                            </t>
                                        </t>
                                        <t t-if="line.selected_combo_items">
                                            <t t-foreach="line.selected_combo_items" t-as="product_id"
                                               t-key="product_id">
                                                <t t-if="env.pos.db.product_by_id[product_id]">
                                                    <div class="product-line-name">
                                                        +
                                                        <t t-esc="line.selected_combo_items[product_id]"/>
                                                        <t t-esc="env.pos.db.product_by_id[product_id].display_name"/>
                                                    </div>
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="line.addon_ids">
                                            <t t-foreach="line.addon_ids" t-as="product_id" t-key="product_id">
                                                <t t-if="env.pos.db.product_by_id[product_id]">
                                                    <div class="product-line-name">
                                                        +
                                                        <t t-esc="line.quantity"/>
                                                        <t t-esc="env.pos.db.product_by_id[product_id].display_name"/>
                                                    </div>
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="line.get_line_note()">
                                            <div class="product-line-name">
                                                Notes :
                                                <t t-esc="line.get_line_note()"/>
                                            </div>
                                        </t>
                                        <div class="product-line-name" t-if="line.packaging">
                                            Packaging :
                                            <t t-esc="line.packaging.name"/>
                                        </div>
                                        <t t-if="line.variants">
                                            <t t-foreach="line.variants" t-as="variant" t-key="variant">
                                                <div class="product-line-name">
                                                    + <t t-esc="variant.value_id[1]"/>
                                                    <t t-esc="env.pos.format_currency_no_symbol(variant.price_extra, 'Price extra')"/>
                                                </div>
                                            </t>
                                        </t>
                                        <t t-if="line.tags and line.tags.length">
                                            Tags:
                                            <t t-foreach="line.tags" t-as="tag" t-key="tag.id">
                                                <div class="product-line-name">
                                                    <t t-esc="tag.name"/>
                                                </div>
                                            </t>
                                        </t>
                                        <t t-if="line.generic_options and line.generic_options.length">
                                            Generic Option:
                                            <t t-foreach="line.generic_options" t-as="generic" t-key="generic">
                                                <div class="product-line-name">
                                                    <t t-esc="generic.name"/>
                                                </div>
                                            </t>
                                        </t>
                                    </div>
                                </td>
                                <td style='text-align:right' class="receipt-line">
                                    <OrderReceiptLinePriceUnit line="line"/>
                                </td>
                            </tr>
                        </t>
                    </t>
                    <t t-else="">
                        <tr t-foreach='orderlines' t-as='line' t-key="line.id" style="border-bottom: dashed 1px">
                            <t t-set="product" t-value="line.get_product()"/>
                            <t t-set='simple'
                               t-value='(line.discount === 0 and line.unit_name === "Units" and line.quantity === 1 and !discount_to_show and !(line.display_discount_policy == "without_discount" &amp;&amp; line.price != line.price_lst))'/>
                            <td style='text-align:left' class="receipt-line">
                                <t t-if="env.pos.config.display_image_receipt">
                                    <div class="receipt-line">
                                        <div class="pos-receipt-left-padding">
                                            <img class='receipt_line_image' t-att-src="line.get_line_image()"/>
                                        </div>
                                    </div>
                                </t>
                                <ProductName product="product"/>
                                <div class="receipt-line">
                                    <t t-esc="env.pos.format_currency_no_symbol(line.price)"/>
                                    x
                                    <t t-esc="Math.round(line.quantity * Math.pow(10, env.pos.dp['Product Unit of Measure'])) / Math.pow(10, env.pos.dp['Product Unit of Measure'])"/>
                                    <t t-if="line.unit_name !== 'Units' and env.pos.config.receipt_display_unit"
                                       t-esc="line.unit_name"/>
                                </div>
                                <div class="receipt-line">
                                    <t t-if="line.discount">
                                        <div class="product-line-name">
                                            Disc: <t t-esc="line.discount"/>
                                            %
                                        </div>
                                    </t>
                                    <t t-if="line.price_extra">
                                        <div class="product-line-name">
                                            Price Extra: <t
                                                t-esc="env.pos.format_currency_no_symbol(line.price_extra, 'Price extra')"/>
                                        </div>
                                    </t>
                                    <t t-if="line.discount_extra">
                                        <div class="product-line-name">
                                            Discount Extra: <t t-esc="line.discount_extra"/>
                                            %
                                        </div>
                                    </t>
                                    <t t-if="env.pos.config.display_tax_receipt and line.get_tax() > 0">
                                        <div class="product-line-name">
                                            Taxes:
                                            <t t-esc="env.pos.format_currency_no_symbol(line.get_tax())"/>
                                        </div>
                                    </t>
                                    <t t-if="line.pack_lot_lines and line.pack_lot_lines.models">
                                        <t t-foreach="line.pack_lot_lines.models" t-as="lot_model" t-key="lot_model">
                                            <div class="receipt-line ">
                                                Lot: <t t-esc="lot_model.attributes.lot_name"/>
                                            </div>
                                        </t>
                                    </t>
                                    <t t-if="line.combo_items">
                                        <t t-foreach="line.combo_items" t-as="combo_item" t-key="combo_item">
                                            <div class="product-line-name">
                                                +
                                                <t t-esc="combo_item.quantity * line.quantity"/>
                                                <t t-esc="combo_item.product_id[1]"/>
                                            </div>
                                        </t>
                                    </t>
                                    <t t-if="line.selected_combo_items">
                                        <t t-foreach="line.selected_combo_items" t-as="product_id" t-key="product_id">
                                            <t t-if="env.pos.db.product_by_id[product_id]">
                                                <div class="product-line-name">
                                                    +
                                                    <t t-esc="line.selected_combo_items[product_id]"/>
                                                    <t t-esc="env.pos.db.product_by_id[product_id].display_name"/>
                                                </div>
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="line.addon_ids">
                                        <t t-foreach="line.addon_ids" t-as="product_id" t-key="product_id">
                                            <t t-if="env.pos.db.product_by_id[product_id]">
                                                <div class="product-line-name">
                                                    +
                                                    <t t-esc="line.quantity"/>
                                                    <t t-esc="env.pos.db.product_by_id[product_id].display_name"/>
                                                </div>
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="line.get_line_note()">
                                        <div class="product-line-name">
                                            Notes :
                                            <t t-esc="line.get_line_note()"/>
                                        </div>
                                    </t>
                                    <div class="product-line-name" t-if="line.packaging">
                                        Packaging :
                                        <t t-esc="line.packaging.name"/>
                                    </div>
                                    <t t-if="line.variants">
                                        <t t-foreach="line.variants" t-as="variant" t-key="variant">
                                            <div class="product-line-name">
                                                + <t t-esc="variant.value_id[1]"/>
                                                <t t-esc="env.pos.format_currency_no_symbol(variant.price_extra, 'Price extra')"/>
                                            </div>
                                        </t>
                                    </t>
                                    <t t-if="line.tags and line.tags.length">
                                        Tags:
                                        <t t-foreach="line.tags" t-as="tag" t-key="tag.id">
                                            <div class="product-line-name">
                                                <t t-esc="tag.name"/>
                                            </div>
                                        </t>
                                    </t>
                                    <t t-if="line.generic_options and line.generic_options.length">
                                        Generic Option:
                                        <t t-foreach="line.generic_options" t-as="generic" t-key="generic">
                                            <div class="product-line-name">
                                                <t t-esc="generic.name"/>
                                            </div>
                                        </t>
                                    </t>
                                </div>
                            </td>
                            <td style='text-align:right' class="receipt-line">
                                <OrderReceiptLinePriceUnit line="line"/>
                            </td>
                        </tr>
                    </t>
                </table>
            </div>
            <!--            <OrderReceiptFooter receipt="receipt"/>-->
            <t t-set='taxincluded' t-value='Math.abs(receipt.subtotal - receipt.total_with_tax) &lt;= 0.000001'/>
            <t t-if='!taxincluded'>
                <t t-if="env.pos.config.receipt_display_subtotal">
                    <div class="receipt-line">
                        <span data-tag="el_subtotal">
                            Subtotal
                        </span>
                        <span class='pos-receipt-right-align'>
                            <t t-esc='env.pos.format_currency_no_symbol(receipt.subtotal)'/>
                        </span>

                    </div>
                </t>
                <t t-foreach='receipt.tax_details' t-as='tax' t-key="tax.amount">
                    <div class="receipt-line">
                        <t t-esc='tax.name'/>
                        <span t-esc='env.pos.format_currency_no_symbol(tax.amount)'
                              class="pos-receipt-right-align"/>
                    </div>
                </t>
            </t>
            <t t-if="receipt.currency">
                <div class="receipt-line">
                    Currency
                    <span t-esc='receipt.currency.name' class="pos-receipt-right-align"/>
                </div>
            </t>
            <!-- Total -->
            <br/>
            <div class="pos-receipt-amount" style="border-top: 1px dashed black">
                <div class="receipt-line">
                    <span style="font-weight: 500">
                        TOTAL
                    </span>
                    <span class='pos-receipt-right-align' style="font-weight: 900">
                        <t t-esc='env.pos.format_currency_no_symbol(receipt.total_with_tax)'/>
                    </span>
                </div>
            </div>
            <!-- Payment Lines -->
            <div class="receipt-line" style="text-align: right; float: right;border-top: 1px solid gray"/>
            <t t-foreach='receipt.paymentlines' t-as='line' t-key="line.cid">
                <div class="receipt-line">
                    <span>
                        <t t-esc='line.name' style="font-weight: 500"/>
                        <t t-if="line.ref">
                            Ref: <t t-esc='line.ref'/>
                        </t>
                        <t t-if="line.cheque_check_number">
                            Cheque: <t t-esc='line.cheque_check_number'/>
                        </t>
                    </span>
                    <span class="pos-receipt-right-align">
                        <t t-esc='env.pos.format_currency_no_symbol(line.amount)'/>
                    </span>
                </div>
            </t>
            <div class="receipt-line">
                <span class="amount_total">CHANGE</span>
                <span class="pos-receipt-right-align">
                    <t t-esc="env.pos.format_currency_no_symbol(receipt.change)"/>
                </span>
            </div>

            <t t-if='receipt.total_discount'>
                <div class="receipt-line">
                    <span class="amount_total">Discounts</span>
                    <span class="pos-receipt-right-align">
                        <t t-esc="env.pos.format_currency_no_symbol(receipt.total_discount)"/>
                    </span>
                </div>
            </t>
            <t t-if='isTaxIncluded'>
                <t t-foreach='receipt.tax_details' t-as='tax' t-key="tax.name">
                    <div class="receipt-line">
                        <t t-esc='tax.name'/>
                        <span t-esc='env.pos.format_currency_no_symbol(tax.amount)'
                              class="pos-receipt-right-align"/>
                    </div>
                </t>
                <div class="receipt-line">
                    <span class="amount_total">Total Taxes</span>
                    <span t-esc='env.pos.format_currency_no_symbol(receipt.total_tax)' class="pos-receipt-right-align"/>
                </div>
            </t>

            <div class='before-footer'/>

            <div class='after-footer'>
                <t t-foreach='receipt.paymentlines' t-as='line'>
                    <t t-if='line.ticket'>
                        <div class="pos-payment-terminal-receipt">
                            <t t-raw='line.ticket'/>
                        </div>
                    </t>
                </t>
            </div>
            <div class="receipt-line" t-if="receipt.note">
                <span class="amount_total">Note</span>
                <span t-esc='receipt.note' class="pos-receipt-right-align"/>
            </div>
            <div class="receipt-line" t-if="receipt.order.get_signature()">
                <span class="amount_total">Signature</span>
                <span class="pos-receipt-right-align">
                    <img class="product-img signature"
                         t-att-src="receipt.order.get_signature() || ''"
                         style="max-height:400px;max-width:100px"
                    />
                </span>
            </div>
            <div class="receipt-line" t-if="env.pos.config.display_return_days_receipt">
                <span class="amount_total">Period Days Return</span>
                <span class="pos-receipt-right-align">
                    <t t-esc="env.pos.config.pos_order_period_return_days"/>
                    ( Days )
                </span>
            </div>
            <t t-if="env.pos.config.barcode_receipt">
                <div class="barcode">
                    <img id="barcode" class="footer_barcode"/>
                    <script type="text/javascript">
                        if ($("#barcode").length ==1) {
                            JsBarcode("#barcode", self.posmodel.get_order().ean13, {
                                format: "EAN13",
                                displayValue: true,
                                fontSize: 14
                            });
                        }
                    </script>
                </div>
            </t>
            <div class="qrcode" t-if="env.pos.config.qrcode_receipt">
                <script type="text/javascript">
                    if ($(".qrcode").length ==1) {
                        new QRCode($(".qrcode")[0], {
                            text: self.posmodel.config.qrcode_receipt,
                            width: 50,
                            height: 50,
                            colorDark : "#000000",
                            colorLight : "#ffffff",
                            correctLevel : QRCode.CorrectLevel.H
                        });
                    }
                </script>
            </div>
            <div class="receipt-line" style="border-bottom: 1px dashed black"/>
            <!-- Footer -->
            <div t-if='receipt.footer_html' class="pos-receipt-center-align">
                <div class="receipt-line">
                    <span class="pos-receipt-center-align">
                        <t t-raw='receipt.footer_html'/>
                    </span>
                </div>
            </div>

            <div t-if='!receipt.footer_html and receipt.footer' class="pos-receipt-center-align">
                <div class="receipt-line">
                    <span class="pos-receipt-center-align">
                        <t t-esc='receipt.footer'/>
                    </span>
                </div>
            </div>

            <div t-if="env.pos.config.html_receipt_design and env.pos.config.html_footer">
                <t t-raw="env.pos.config.html_footer"/>
            </div>
            <t t-if="receipt.location and env.pos.config.receipt_display_warehouse">
                <div class="receipt-line">
                    <span>
                        Source Location: <t t-esc='receipt.location.display_name'/>
                    </span>
                    <span class="pos-receipt-right-align">
                    </span>
                </div>
            </t>
            <t t-if="receipt.plus_point">
                <div class="receipt-line">
                    <span>
                        Points win of ticket <t t-esc="receipt.plus_point"/>
                    </span>
                    <span class="pos-receipt-right-align">
                    </span>
                </div>
            </t>
            <t t-if="receipt.redeem_point">
                <div class="receipt-line">
                    <span>
                        Points redeem of ticket <t t-esc="receipt.redeem_point.toFixed(2)"/>
                    </span>
                    <span class="pos-receipt-right-align">
                    </span>
                </div>
            </t>
            <div class="receipt-line">
                <span>
                    <t t-esc="receipt.name"/>
                </span>
                <span class='pos-receipt-right-align'>
                    <t t-esc='receipt.date.localestring'/>
                </span>
            </div>
            <t t-if="receipt.order.pos_reference and !receipt.name">
                <div class="receipt-line">
                    <span>
                        <t t-esc="receipt.order.pos_reference"/>
                    </span>
                    <span class='pos-receipt-right-align'>
                        <t t-esc="receipt.date_order"/>
                    </span>
                </div>
            </t>
            <t t-if="props.order.giftcard.length !== 0">
                <div class="pos-receipt">
                    <br/>
                    <div>-----------------------------------------------------</div>
                    <div class="pos-center-align">Card Details</div>
                    <div>-----------------------------------------------------</div>
                    <table style="width:100%;">
                        <tbody>
                            <tr>
                                <td class="pos-left-align">Customer Name:</td>
                                <t t-set="customer_id" t-value="props.order.giftcard[0]['customer_id']"/>
                                <td class="pos-right-align"><t t-esc="env.pos.db.get_partner_by_id(customer_id).name"/></td>
                            </tr>
                            <tr>
                                <td class="pos-left-align">Card No:</td>
                                <td class="pos-right-align"><t t-esc="props.order.giftcard[0]['card_no']"/></td>
                            </tr>
                            <tr>
                                <td class="pos-left-align">Expire Date:</td>
                                <td class="pos-right-align"><t t-esc="props.order.giftcard[0]['expire_date']"/></td>
                            </tr>
                            <tr>
                                <td class="pos-left-align">Card Value:</td>
                                <td class="pos-right-align"> <t t-esc="props.order.giftcard[0]['card_value']"/></td>
                            </tr>
                        </tbody>
                    </table>
                    <br/>
                    <div class="pos-center-align" align="center">
                        <img style="width:300px;height:100px;" t-att-src='receipt.barcode' alt="Logo"/>
                    </div>
                </div>
            </t>
            <t t-if="props.order.redeem !== false">
                <div class="pos-receipt">
                     <br/>
                    <div>-----------------------------------------------------</div>
                    <div class="pos-center-align">Card Details</div>
                    <div>-----------------------------------------------------</div>
                    <table style="width:100%;">
                        <tbody>
                            <tr>
                                <td class="pos-left-align">Customer Name:</td>
                                <td class="pos-right-align"><t t-esc="props.order.redeem.customer_name"/></td>
                            </tr>
                            <tr>
                                <td class="pos-left-align">Card No:</td>
                                <td class="pos-right-align"><t t-esc="props.order.redeem.redeem_card"/></td>
                            </tr>
                            <tr>
                                <td class="pos-left-align">Expiry Date:</td>
                                <td class="pos-right-align"><t t-esc="props.order.redeem.expiry_date"/></td>
                            </tr>
                            <tr>
                                <td class="pos-left-align">Card Balance:</td>
                                <td class="pos-right-align"> <t
                                        t-esc="env.pos.format_currency(props.order.redeem.redeem_remaining)"/></td>
                            </tr>
                        </tbody>
                    </table>
                    <br/>
                    <div class="pos-center-align" align="center">
                        <img style="width:300px;height:100px;" t-att-src='receipt.barcode' alt="Logo"/>
                    </div>
                </div>
            </t>
            <t t-if="props.order.recharge !== false">
                <div class="pos-receipt">
                     <br/>
                    <div>-----------------------------------------------------</div>
                    <div class="pos-center-align">Card Details</div>
                    <div>-----------------------------------------------------</div>
                    <table style="width:100%;">
                        <tbody>
                            <tr>
                                <td class="pos-left-align">Customer Name:</td>
                                <td class="pos-right-align"><t t-esc="props.order.recharge.customer_name"/></td>
                            </tr>
                            <tr>
                                <td class="pos-left-align">Card No:</td>
                                <td class="pos-right-align"><t t-esc="props.order.recharge.recharge_card_no"/></td>
                            </tr>
                            <tr>
                                <td class="pos-left-align">Expiry Date:</td>
                                <td class="pos-right-align"><t t-esc="props.order.recharge.expire_date"/></td>
                            </tr>
                            <tr>
                                <td class="pos-left-align">Recharge Amount:</td>
                                <td class="pos-right-align"> <t
                                        t-esc="env.pos.format_currency(props.order.recharge.recharge_card_amount)"/></td>
                            </tr>
                            <tr>
                                <td class="pos-left-align">Card Amount:</td>
                                <td class="pos-right-align"> <t
                                        t-esc="env.pos.format_currency(props.order.recharge.total_card_amount)"/></td>
                            </tr>
                        </tbody>
                    </table>
                    <br/>
                    <div class="pos-center-align" align="center">
                        <img style="width:300px;height:100px;" t-att-src='receipt.barcode' alt="Logo"/>
                    </div>
                </div>
            </t>
        </div>
    </t>

</templates>
